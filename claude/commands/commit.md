# Claude コマンド: Commit

このコマンドは、絵文字付きの慣習的なコミットメッセージで、整形されたコミットを作成するのに役立ちます。

## 使い方

コミットを作成するには、次のように入力してください:
```
/commit
```

またはオプション付きで:
```
/commit --no-verify
```

## このコマンドの動作

1. `--no-verify`が指定されていない限り、自動的にプリコミットチェックを実行します:
   - `pnpm lint` でコード品質を確認
   - `pnpm build` でビルドが成功することを検証
   - `pnpm generate:docs` でドキュメントを更新
2. `git status` でステージングされたファイルを確認
3. ステージングされたファイルが0個の場合、`git add` で変更および新規ファイルをすべて自動的に追加
4. `git diff` を実行して、コミットされる変更内容を理解
5. 差分を分析して、複数の異なる論理的変更が存在するかを判断
6. 複数の異なる変更が検出された場合、コミットを複数の小さなコミットに分割することを提案
7. 各コミット（または分割しない場合は単一のコミット）に対して、絵文字付きの慣習的なコミットメッセージを作成

## コミットのベストプラクティス

- **コミット前に検証**: コードがリント済み、正しくビルドされ、ドキュメントが更新されていることを確認
- **アトミックコミット**: 各コミットには、単一の目的に関連する変更のみを含める
- **大きな変更を分割**: 変更が複数の関心事に触れる場合は、別々のコミットに分割
- **慣習的なコミット形式**: `<type>: <description>` の形式を使用（typeは以下のいずれか）:
  - `feat`: 新機能
  - `fix`: バグ修正
  - `docs`: ドキュメントの変更
  - `style`: コードスタイルの変更（フォーマットなど）
  - `refactor`: バグ修正や機能追加を含まないコード変更
  - `perf`: パフォーマンス改善
  - `test`: テストの追加または修正
  - `chore`: ビルドプロセスやツールなどの変更
- **現在形、命令形**: コミットメッセージを命令として記述（例: "add feature"、"added feature"ではない）
- **簡潔な1行目**: 1行目は72文字以内に
- **絵文字**: 各コミットタイプには適切な絵文字が付きます:
  - ✨ `feat`: 新機能
  - 🐛 `fix`: バグ修正
  - 📝 `docs`: ドキュメント
  - 💄 `style`: フォーマット/スタイル
  - ♻️ `refactor`: コードのリファクタリング
  - ⚡️ `perf`: パフォーマンス改善
  - ✅ `test`: テスト
  - 🔧 `chore`: ツール、設定
  - 🚀 `ci`: CI/CDの改善
  - 🗑️ `revert`: 変更の取り消し
  - 🧪 `test`: 失敗するテストを追加
  - 🚨 `fix`: コンパイラ/リンターの警告を修正
  - 🔒️ `fix`: セキュリティの問題を修正
  - 👥 `chore`: コントリビューターを追加または更新
  - 🚚 `refactor`: リソースを移動または名前変更
  - 🏗️ `refactor`: アーキテクチャの変更
  - 🔀 `chore`: ブランチをマージ
  - 📦️ `chore`: コンパイル済みファイルやパッケージを追加または更新
  - ➕ `chore`: 依存関係を追加
  - ➖ `chore`: 依存関係を削除
  - 🌱 `chore`: シードファイルを追加または更新
  - 🧑‍💻 `chore`: 開発者体験を改善
  - 🧵 `feat`: マルチスレッドまたは並行処理に関連するコードを追加または更新
  - 🔍️ `feat`: SEOを改善
  - 🏷️ `feat`: 型を追加または更新
  - 💬 `feat`: テキストやリテラルを追加または更新
  - 🌐 `feat`: 国際化とローカライゼーション
  - 👔 `feat`: ビジネスロジックを追加または更新
  - 📱 `feat`: レスポンシブデザインの作業
  - 🚸 `feat`: ユーザーエクスペリエンス/ユーザビリティを改善
  - 🩹 `fix`: 重大でない問題の簡単な修正
  - 🥅 `fix`: エラーをキャッチ
  - 👽️ `fix`: 外部APIの変更によるコード更新
  - 🔥 `fix`: コードまたはファイルを削除
  - 🎨 `style`: コードの構造/フォーマットを改善
  - 🚑️ `fix`: 重大なホットフィックス
  - 🎉 `chore`: プロジェクトを開始
  - 🔖 `chore`: リリース/バージョンタグ
  - 🚧 `wip`: 作業中
  - 💚 `fix`: CIビルドを修正
  - 📌 `chore`: 依存関係を特定のバージョンに固定
  - 👷 `ci`: CIビルドシステムを追加または更新
  - 📈 `feat`: 分析またはトラッキングコードを追加または更新
  - ✏️ `fix`: タイポを修正
  - ⏪️ `revert`: 変更を取り消し
  - 📄 `chore`: ライセンスを追加または更新
  - 💥 `feat`: 破壊的変更を導入
  - 🍱 `assets`: アセットを追加または更新
  - ♿️ `feat`: アクセシビリティを改善
  - 💡 `docs`: ソースコードにコメントを追加または更新
  - 🗃️ `db`: データベース関連の変更を実行
  - 🔊 `feat`: ログを追加または更新
  - 🔇 `fix`: ログを削除
  - 🤡 `test`: モックを作成
  - 🥚 `feat`: イースターエッグを追加または更新
  - 🙈 `chore`: .gitignoreファイルを追加または更新
  - 📸 `test`: スナップショットを追加または更新
  - ⚗️ `experiment`: 実験を実施
  - 🚩 `feat`: 機能フラグを追加、更新、または削除
  - 💫 `ui`: アニメーションとトランジションを追加または更新
  - ⚰️ `refactor`: デッドコードを削除
  - 🦺 `feat`: バリデーション関連のコードを追加または更新
  - ✈️ `feat`: オフライン対応を改善

## コミット分割のガイドライン

差分を分析する際は、以下の基準に基づいてコミットの分割を検討してください:

1. **異なる関心事**: コードベースの無関係な部分への変更
2. **異なる種類の変更**: 機能、修正、リファクタリングなどの混在
3. **ファイルパターン**: 異なる種類のファイルへの変更（例: ソースコードとドキュメント）
4. **論理的グループ化**: 別々に理解またはレビューした方がわかりやすい変更
5. **サイズ**: 分割した方が明確になる、非常に大きな変更

## 例

良いコミットメッセージ:
- ✨ feat: ユーザー認証システムを追加
- 🐛 fix: レンダリングプロセスのメモリリークを解決
- 📝 docs: 新しいエンドポイントでAPIドキュメントを更新
- ♻️ refactor: パーサーのエラーハンドリングロジックを簡素化
- 🚨 fix: コンポーネントファイルのリンター警告を解決
- 🧑‍💻 chore: 開発者ツールのセットアッププロセスを改善
- 👔 feat: トランザクション検証のビジネスロジックを実装
- 🩹 fix: ヘッダーの軽微なスタイルの不一致に対処
- 🚑️ fix: 認証フローの重大なセキュリティ脆弱性にパッチ
- 🎨 style: より読みやすくするためにコンポーネント構造を再編成
- 🔥 fix: 非推奨のレガシーコードを削除
- 🦺 feat: ユーザー登録フォームの入力バリデーションを追加
- 💚 fix: 失敗するCIパイプラインテストを解決
- 📈 feat: ユーザーエンゲージメントの分析トラッキングを実装
- 🔒️ fix: 認証パスワード要件を強化
- ♿️ feat: スクリーンリーダー用のフォームアクセシビリティを改善

コミット分割の例:
- 1つ目のコミット: ✨ feat: 新しいsolcバージョンの型定義を追加
- 2つ目のコミット: 📝 docs: 新しいsolcバージョンのドキュメントを更新
- 3つ目のコミット: 🔧 chore: package.jsonの依存関係を更新
- 4つ目のコミット: 🏷️ feat: 新しいAPIエンドポイントの型定義を追加
- 5つ目のコミット: 🧵 feat: ワーカースレッドの並行処理を改善
- 6つ目のコミット: 🚨 fix: 新しいコードのリンティング問題を解決
- 7つ目のコミット: ✅ test: 新しいsolcバージョン機能の単体テストを追加
- 8つ目のコミット: 🔒️ fix: セキュリティ脆弱性のある依存関係を更新

## コマンドオプション

- `--no-verify`: プリコミットチェック（lint、build、generate:docs）の実行をスキップ

## 重要な注意事項

- デフォルトでは、コード品質を確保するためにプリコミットチェック（`pnpm lint`、`pnpm build`、`pnpm generate:docs`）が実行されます
- これらのチェックが失敗した場合、そのままコミットを続行するか、最初に問題を修正するかを尋ねられます
- 特定のファイルが既にステージングされている場合、コマンドはそれらのファイルのみをコミットします
- ファイルがステージングされていない場合、変更および新規ファイルをすべて自動的にステージングします
- コミットメッセージは検出された変更に基づいて構築されます
- コミットする前に、コマンドは差分をレビューして、複数のコミットがより適切かどうかを判断します
- 複数のコミットを提案する場合、変更を別々にステージングしてコミットするのを手伝います
- コミット差分を常にレビューして、メッセージが変更と一致していることを確認します
