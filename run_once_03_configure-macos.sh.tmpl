#!/bin/bash
{{ if eq .chezmoi.os "darwin" -}}

set -e

echo "âš™ï¸  Configuring macOS system settings..."

##
# Trackpad
##

echo "ğŸ–±ï¸  Configuring trackpad settings..."

## ãƒã‚¤ãƒ³ãƒˆã¨ã‚¯ãƒªãƒƒã‚¯

# å‰¯ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚’2æœ¬æŒ‡ã§ã‚¯ãƒªãƒƒã‚¯ã€ã¾ãŸã¯ã‚¿ãƒƒãƒ—
defaults write -globalDomain ContextMenuGesture -integer 1
defaults write -globalDomain TrackpadRightClick -integer 1
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadRightClick -integer 1

# ã‚¿ãƒƒãƒ—ã§ã‚¯ãƒªãƒƒã‚¯
defaults write com.apple.AppleMultitouchTrackpad Clicking -integer 1
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -integer 1

# è»Œè·¡ã®é€Ÿã•
defaults write -globalDomain com.apple.trackpad.scaling -integer 3

## ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¨ã‚ºãƒ¼ãƒ 

# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æ–¹å‘ã‚’ãƒŠãƒãƒ¥ãƒ©ãƒ«ã«
defaults delete -globalDomain com.apple.swipescrolldirection 2>/dev/null || true

# 2æœ¬æŒ‡ã§æ‹¡å¤§ãƒ»ç¸®å°
defaults write com.apple.AppleMultitouchTrackpad TrackpadPinch -integer 1
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadPinch -integer 1

# ã‚¹ãƒãƒ¼ãƒˆã‚ºãƒ¼ãƒ 
defaults write com.apple.AppleMultitouchTrackpad TrackpadTwoFingerDoubleTapGesture -integer 1
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadTwoFingerDoubleTapGesture -integer 1

# 2æœ¬æŒ‡ã§å›è»¢
defaults write com.apple.AppleMultitouchTrackpad TrackpadRotate -integer 1
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadRotate -integer 1

##
# Keyboard
##

echo "âŒ¨ï¸  Configuring keyboard settings..."

# ã‚­ãƒ¼ã®ãƒªãƒ”ãƒ¼ãƒˆ
defaults write -g InitialKeyRepeat -int 15
defaults write -g KeyRepeat -int 2

echo "âœ¨ macOS configuration completed!"
echo "âš ï¸  Note: Some changes require a logout/restart to take effect."

{{ end -}}
